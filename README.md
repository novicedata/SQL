# SQL

## 데이터 모델링 이해

### 1. 모델링
  * [데이터베이스의 모델링]: 현실 세계를 단순화하여 표현하는 기법
<br>

  * **특징**
    * **추상화**: 현실 세계를 일정한 형식으로 표현하는 것(아이디어나 개념을 간략하게 표현하는)
    * **단순화**: 복잡한 현실 세계를 정해진 기법으로 단순하고 쉽게 표현
    * **명확화**: 불분명함을 제거, 명확하게 해석할 수 있도록 기술
<br>

  * **관점**
    * 데이터 관점(What, Data): 데이터 위주 모델링
    * 프로세스 관점(How, Process): 프로세스 위주 모델링
    * 데이터, 프로세스 상관 관점(Data vs. Process, Interaction): 데이터와 프로세스의 관계 위주 모델링
<br>

  * **데이터 품질**
    * **중복**: 같은 데이터가 여러 엔터티에 중복 저장 현상 지양
    * **비유연성**: 데이터 모델과 프로세스를 분리하여 유연성을 높여야함
    * **비일관성**: 데이터 간의 연관 관계에 대해 명확하게 정의해야함
<br>

  * **세 가지 단계**
    * **개념적** 모델링: 전사적 데이터 모델링 수행 시. 업무 중심적, 포괄적인 수준의 모델링
    * **논리적** 모델링: 재사용성이 가장 높은 모델링. 모델에 대한 key, 속성, 관계 등 모두 표현
    * **물리적** 모델링: 실제 데이터 베이스로 구현할 수 있도록 물리적 성격 고려하여 모델 표현
<br>

  * **ANSI-SPARC 아키텍쳐**
    * **스키마**
      * **외부** 스키마: 사용자의 관점(Multiple User's View) 단계
      * **개념** 스키마: 통합된 관점(Community View of DB) 단계. 데이터베이스에 저장되는 데이터들을 표현하고 데이터들 간 관계 나타냄
      * **내부** 스키마: 물리적 관점(Physical Representation) 단계. 물리적 저장 구조
    * **보장하는 독립성**
      * **논리적** 독립성: 개념 스키마가 변경되어도 외부 스키마는 영향받지 않음
      * **물리적** 독립성: 내부 스키마가 변경되어도 외부/개념 스키마는 영향받지 않음
<br>

  * **ERD(Entity Relationship Diagram)**
    * [표기 방식](https://github.com/novicedata/SQL/blob/main/ERD/%ED%91%9C%EA%B8%B0%EB%B0%A9%EC%8B%9D.png)
    * [IE/Corw's Foot 표기법](https://github.com/novicedata/SQL/blob/main/ERD/Crowfoot%ED%91%9C%EA%B8%B0%EB%B2%95.png)
    * ERD 작성 순서(어느 표기법이든 동일)
      * 엔터티 도출하고 그림
      * 엔터티 적절하게 배치
      * 엔터티 간 관계 설정
      * 관계명 기입
      * 관계의 참여도 기입
      * 관계의 필수/선택 여부 기입
<br>

### 2. 엔터티(Entity)
 * 사전적인 의미는 '독립체'
 * 식별 가능한 객체라는 의미를 지님(정보를 저장할 수 있는 어떤 것)
 * 업무에서 쓰이는 데이터를 용도별로 분류한 그룹
<br>

 * 엔터티: Table, 인스턴스: row, 속성: columns
 * 예) 회원(엔터티), 아이디/비밀번호/이름(속성)
<br>

 * **특징**
   * 업무에서 쓰이는 정보여야함
   * 유니크함을 보장할 수 있는 식별자가 있어야함
   * 2개 이상의 인스턴스를 가져야함
   * 속성을 가져야함
   * 다른 엔터티와 1개 이상의 관계를 가지고 있어야함
<br>
  
 * **분류**
   * **유형** 엔터티: 물리적 형태 존재(안정적, 지속적). 상품, 회원 등
   * **개념** 엔터티: 물리적 형태 없음(개념적). 부서, 학과 등
   * **사건** 엔터티: 행위를 함으로 써 발생. 주문, 이벤트 응모
   * **기본** 엔터티: 업무에 원래 존재하는 정보, 독립적 생성. 상품, 회원, 사원 부서 등
   * **중심** 엔터티: 기본 엔터티로부터 파생, 행위 엔터티를 생성. 주문, 매충, 계약 등
   * **행위** 엔터티: 2개 이상의 엔터티로부터 파생. 주문내역, 이벤트 응모 이력 
<br>

### 3. 속성(attribute)
 * 특징을 설명해줄 수 있는 항목들
 * 의미상 더 이상 쪼개지지 않는 레벨이어야 한다
 * 프로세스에 꼭 필요한 항목이어야 한다
<br>

 * **속성값**
   * 각 속성은 속성값을 가지고, 속성값은 엔터티에 속한 하나의 인스턴스를 구체적으로 나타내주는 데이터
   * 하나의 속성은 한 개의 속성값만 가질 수 있다.
     * 만약 하나 이상의 속성값을 갖는 경우 별도 엔터티로 분리하는 것이 바람
<br>

 * **엔터티, 인스턴스, 속성, 속성값의 관계**
   * [관계 표기 도식](https://github.com/novicedata/SQL/blob/main/ERD/%EC%9A%94%EC%86%8C%EA%B0%84%EA%B4%80%EA%B3%84.png)
   * 한 개의 엔터티는 두 개 이상의 인스턴스를 갖는다
   * 핸 개의 인스턴스는 두 개 이상의 속성을 갖는다
   * 한 개의 속성은 하나의 속성값을 갖는다
<br>

 * **분류**
   * **특성 분류**
     * **기본속성**: 업무 프로세스 분석을 통해 바로 정의 가능한 속성
     * **설계속성**: 업무에 존재하지 않지만 설계하다 보니 필요하다고 판단되어 도출한 속성
     * **파생속성**: 다른 속성의 속성값을 계산하거나 특정한 규칙으로 변형하여 생성한 속성
<br>

   * **구성방식 분류**
     * **PK(Primary Key) 속성**: 엔터티의 인스턴스들을 식별할 수 있는 속성(학번, 상품 코드, 사번)
     * **FK(Foreign Key) 속성**: 다른 엔터티의 속성에서 가져온 속성(학과, 회원등급코드, 부서)
     * **일반속성**: PK, FK 제외 나머지 속
<br>

 * **도메인(Domain)**
   * 속성이 가질 수 있는 속성값의 범위 (학점 속성, 학점의 속성값의 범위인 0.1~4.5 범위를 도메인)
   * 용어사전: 용어 혼란 없앰. 직관적 부여 위함
   * 시스템 카탈로그: 시스템 자체에 관련 있는 데이터를 담은 데이터베이스
<br>

### 4. 관계(relationship)
 * 엔터티와 엔터티와의 관계
 * 어떠한 연관성이 있는지 타입을 분류하여 존재 과계와 행위 관계로 나눌 수 있음.
<br>

 * **존재관계** : 존재 자체로 연관성이 있는 관계(직원_부서, 학생_학과)
 * **행위관계** : 특정한 행위를 함으로써 연관성이 생기는 관계(회원_주문, 학생_출석부)
<br>

 * **표기법**
   * **관계명**: 관계의 이름
     * 명확한 문장 + 현재형
     * 모든 관계는 두 개의 관계명을 가짐(각 엔터티의 관점에서 관계명을 하나씩 가지기 때문)
     * 예) 학과-(포함한다)---(소속된다)-학생
<br>

   * **관계차수**: 각 엔터티에서 관계에 참여하는 수 (1:1, 1:M, N:M ...)
   * **관계선택사양**:
     * 필수적 관계: 참여자가 반드시 존재해야하는 관계(주문-주문상품 등)
     * 선택적 관계: 참여자가 없을 수도 있는 관계(학생-출석부 등)
<br>

### 식별자(Identifiers)
 * 속성 중에 각각의 인스턴스를 구분 가능하게 만들어주는 대표격인 속성
<br>

 * **주식별자**
   * 기본키, PK에 해당하는 속성
   * 하나의 속성이 주식별자가 될 수도 있고 여러 개의 속성이 주식별자가 될 수도 있다.
   * 유일성, 최소성, 불변성, 존재
<br>

 * **분류**
   * **대표성 여부**
     * **주식별자**: 다른 엔터티와 참조 관계로 연결
     * **보조식별자**: 인스턴스 식별가능하지만 대표 식별자는 아님. 다른 엔터티와 연결 X
<br>

   * **스스로 생성되었는지**
     * **내부식별자**: 엔터티 내부에서 스스로 생성된 식별자
     * **외부식별자**: 다른 엔터티에서 온 식별자, 연결고리 역할
<br>

   * **단일속성 여부**
     * **단일식별자**: 하나의 속성으로 구성된 식별자
     * **복합식별자**: 두 개 이상의 속성으로 구성된 식별자
<br>

  * **대체 여부**
    * **본질식별자**: 업무 프로세스에 존재하는 식별자, 가공X 원조 식별자
    * **인조식별자**: 주식별자의 속성이 두 개 이상인 경우 하나로 묶어사용. 대리식별자
<br>

 * **식별 vs 비식별**
   * **식별자 관계**: 부모 엔터티의 식별자가 자식 엔터티의 주식별자가 되는 관계
     * 단일식별자인지 복합식별자인지에 따라 1:1, 1:M
<br>

   * **비식별자 관계**: 부모 엔터티의 식별자가 자식 엔터티의 주식별자가 아닌 일반 속성이 되는 관계
     * 부모 및 자식 엔터티의 여부와 상관없이 존재하는 상태에서 삭제, 없는 상태에서 생성이 가능
