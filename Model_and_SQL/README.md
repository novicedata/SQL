# SQL

## 데이터 모델과 SQL

### 정규화

- **데이터 입력, 수정, 삭제 성능을 향상**시키기 위해 엔터티를 작은 단위로 분리하는 과정
- **정규화 규칙**
  - **제1정규형**: 모든 속성은 하나의 값만 가져야 함
  - **제2정규형**: 모든 일반속성은 반드시 모든 주식별자에 중속되어야 함
  - **제3정규형**: 주식별자가 아닌 모든 속성 간에는 서로 종속될 수 없
<br>

### 반정규화

- **데이터 조회 성능을 향상**시키기 위해 데이터 중복 허용 및 데이터 그룹핑하는 과정
- **반정규화 규칙**
  - **테이블 반정규화**
    - **테이블 병합**: JOIN이 필요한 경우가 많아서 테이블을 통합하는 것이 유리할 때(1:M일 때 1 엔터티의 속성이 많으면 중복이 많아져서 X)
    - **테이블 분할**
      - **테이블 수직 분할**: 엔터티의 일부 속성을 별도의 엔터티로 분할(1:1 관계 성립)
      - **테이블 수평 분할**: 엔터티의 인스턴스를 특정 기준으로 별도의 엔터티로 분할(년도 기준 등)
    - **테이블 추가**
      - **중복 테이블 추가**: 중복 감안하더라도 성능상 필요하면 별도 엔터티 추가
      - **통계 테이블 추가**: 통계치 계산한 테이블 추가(합산 등)
<br>

  - **칼럼 반정규화**
    - **중복 칼럼 추가**: JOIN 다수 발생 시
    - **파생 칼럼 추가**: 계산값 미리 컬럼으로 추가
    - **이력 테이블 칼럼 추가**: 속도 저하 우려로 조회 기준이 될 것으로 판단되는 칼럼 미리 추가
<br>

  - **관계 반정규화(중복관계 추가)**: JOIN 다수 발생 시
<br>

### 트랜잭션(Transaction)

- 데이터를 조작하기 위한 하나의 논리적 작업 단위
- **특징**
  - **원자성**: 더 이상 분리 불가능한 업무의 최소 단위
  - **일관성**: 하나의 트랜잭션이 완료된 후에도 데이터베이스는 여전히 일관된 상태여야 함
  - **고립성**: 실행 중인 트랜잭션의 중간 결과에 다른 트랜잭션이 접근할 수 없음
  - **지속성**: 트랜잭션이 성공적으로 실행 완료되면 결과는 데이터베이스에 영속적으로 저장
<br>

### 본질식별자 vs 인조식별자

- **본질식별자**: 현실 세계의 고유한 속성을 그대로 사용하는 식별자
- **인조식별자**: 인위적으로 생성된 식별
